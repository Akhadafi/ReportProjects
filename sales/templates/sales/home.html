{% extends 'base.html' %}
<!--  -->
{% load static %}
<!--  -->
{% load crispy_forms_tags %}
<!--  -->
{% block title %}{{ title }}{% endblock title %}
<!--  -->
{% block content %}
<!--  -->
<script src="{% static 'sales/home.js' %}" defer></script>
<style>
  .not-visible {
    display: none;
  }
</style>

<!-- Modal -->
<div
  class="modal fade"
  id="reportModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">...</div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

<form action="" method="POST">
  {% csrf_token %}
  <!--  -->
  {{ form|crispy }}
  <button type="submit" class="btn btn-primary mt-3">Search</button>
</form>
<br />
{% if sales_df %} sales df
<small> {{ sales_df|safe }} </small>
<br />
positions df
<small> {{ positions_df|safe }} </small>
<br />
merged df
<small> {{ merged_df|safe }} </small>
<br />
grouped by df
<small> {{ df|safe }} </small>
<br />
Chart
<br />
<img src="data:image/png;base64, {{chart|safe}}" id="img" />
{% else %}
<p>No data</p>
{% endif %}
<button
  class="btn btn-primary not-visible"
  id="report-btn"
  data-bs-toggle="modal"
  data-bs-target="#reportModal"
>
  add report
</button>
<!--  -->
{% endblock content %}
